<!DOCTYPE html>
<html>
<head>
    <title>News Aggregator</title>
    <style>
        .news-item { margin: 20px; padding: 15px; border: 1px solid #ddd; }
        .news-item h3 { margin-top: 0; }
        .source { color: #727272; font-size: 0.9em; }
    </style>
</head>
<body>
    <h1>Latest News</h1>
    <div id="news-container"></div>

    <script>
        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleDateString('ru-RU', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        fetch('/api/news/10')
            .then(response => response.json())
            .then(news => {
                const container = document.getElementById('news-container');
                news.forEach(item => {
                    const div = document.createElement('div');
                    div.className = 'news-item';
                    div.innerHTML = `
                        <h3><a href="${item.link}" target="_blank">${item.title}</a></h3>
                        <p>${item.description || ''}</p>
                        <div class="source">
                            <span>${formatDate(item.date)}</span> | 
                            <a href="${item.feed}" target="_blank">Источник</a>
                        </div>
                    `;
                    container.appendChild(div);
                });
            })
            .catch(err => console.error('Error fetching news:', err));
    </script>
</body>
</html>